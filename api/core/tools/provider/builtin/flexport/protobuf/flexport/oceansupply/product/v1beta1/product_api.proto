// TEAM: ocean_supply

syntax = "proto3";

package flexport.oceansupply.product.v1beta1;

import "flexport/oceansupply/product/v1beta1/product.proto";

option java_multiple_files = true;
option java_outer_classname = "ProductApiProto";
option java_package = "com.flexport.oceansupply.product.v1beta1";
option ruby_package = "Flexport::OceanSupply::V1Beta1";

// An API for interacting with ocean products.
service ProductAPI {
  // Returns the latest known fulfillment guidance (eg. target week) for a given list of shipments.
  rpc GetFulfillmentGuidance(GetFulfillmentGuidanceRequest) returns (GetFulfillmentGuidanceResponse);
  // Returns the list of interchangeable ports for fulfillment.
  rpc GetInterchangeablePortsList(GetInterchangeablePortsListRequest) returns (GetInterchangeablePortsListResponse);
  // Returns a list of matching ocean products given the search parameters.
  rpc FindOceanProducts(FindOceanProductsRequest) returns (FindOceanProductsResponse);
  // Returns a list of transit time SLA uuids that match the search parameters.
  rpc GetTransitTimeSlaUuid(GetTransitTimeSlaUuidRequest) returns (GetTransitTimeSlaUuidResponse);
  // Returns the fulfillment guidance including product set definition and target week given the search parameters.
  rpc GetFulfillmentGuidanceV2(GetFulfillmentGuidanceV2Request) returns (GetFulfillmentGuidanceV2Response);
  // Returns applicable product sets for inventory ref
  rpc GetProductSetDefinitionsByInventoryRef(GetProductSetDefinitionsByInventoryRefRequest) returns (GetProductSetDefinitionsByInventoryRefResponse);
}

// The request for ValidateOceanProducts.
message ValidateOceanProductsRequest {
  // A list of Ocean Product names to validate.
  repeated string ocean_product_names = 1;
}

// The response for ValidateOceanProducts.
message ValidateOceanProductsResponse {
  // A list of Ocean Product names that corresponds to valid Ocean Products.
  repeated string valid_ocean_product_names = 1;
}

// A request containing shipment identifiers.
message GetFulfillmentGuidanceRequest {
  // Each string could either be a shipment fid (flx::core:shipment) or an execution order fid.
  repeated string fid = 1;
}

// The response will contain one element for every shipment that was found.
// If ocean-supply has no information about that shipment, it won't appear in the results.
message GetFulfillmentGuidanceResponse {
  repeated FulfillmentGuidance fulfillment_guidance = 1;
}

// Request for GetInterchangeablePortsList.
message GetInterchangeablePortsListRequest {}

// The response GetInterchangeablePortsList that contains a list of interchangeable port fid lists.
message GetInterchangeablePortsListResponse {
  repeated InterchangeablePorts interchangeable_ports_list = 1;
}

message FindOceanProductsRequest {
  repeated OceanProductSearchParameters search_parameters = 1;
}

message FindOceanProductsResponse {
  repeated OceanProductSearchResult search_results = 1;
}

message GetTransitTimeSlaUuidRequest {
  repeated TransitTimeSlaUuidSearchParameters search_parameters = 1;
}

message GetTransitTimeSlaUuidResponse {
  repeated TransitTimeSlaUuidSearchResult uuid_search_results = 1;
}

message GetFulfillmentGuidanceV2Request {
  repeated FulfillmentGuidanceV2Param fulfillment_guidance_params = 1;
}

message GetFulfillmentGuidanceV2Response {
  repeated FulfillmentGuidanceV2Result fulfillment_guidance_results = 1;
}

message GetProductSetDefinitionsByInventoryRefRequest {
  string inventory_ref = 1;
}

message GetProductSetDefinitionsByInventoryRefResponse {
  repeated ProductSetDefinition product_set_definitions = 1;
}
