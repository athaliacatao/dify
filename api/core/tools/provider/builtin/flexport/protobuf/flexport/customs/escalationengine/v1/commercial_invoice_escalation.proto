// TEAM: customs_platform

syntax = "proto3";

package flexport.customs.escalationengine.v1;

option java_multiple_files = true;
option java_outer_classname = "CommercialInvoiceEscalationProto";
option java_package = "com.flexport.customs.escalationengine.v1";
option ruby_package = "Flexport::Customs::EscalationEngine::V1";

message CommercialInvoiceEscalation {
  enum Type {
    TYPE_INVALID = 0;
    reserved 1;

    TYPE_HEADER_INFO_UNVERIFIED = 2;
    TYPE_PACKING_LIST_DETAILS_UNVERIFIED = 3;
    TYPE_PRODUCT_DETAILS_UNVERIFIED = 4;
  }
  Type type = 1;

  oneof commercial_invoice_context {
    HeaderInfoUnverifiedContext header_info_unverified_context = 2;
    PackingListDetailsUnverifiedContext packing_list_details_unverified_context = 3;
    ProductDetailsUnverifiedContext product_details_unverified_context = 4;
  }

  message HeaderInfoUnverifiedContext {
    reserved 1; // Removed field commercial_invoice_fid
    bool is_ai_transcription_incomplete = 2;
  }

  message PackingListDetailsUnverifiedContext {
    reserved 1; // Removed field commercial_invoice_fid
    bool is_ai_transcription_incomplete = 2;
  }

  message ProductDetailsUnverifiedContext {
    bool is_ai_transcription_incomplete = 1;
  }
}

// Deprecated and not used message
message CommercialInvoiceLineItemEscalation {
  enum Type {
    TYPE_INVALID = 0;

    TYPE_QUANTITY_INCORRECT = 1 [deprecated = true]; // from old, pre-M1 implementation
    TYPE_COUNTRY_OF_ORIGIN_INCORRECT = 2 [deprecated = true]; // from old, pre-M1 implementation

    TYPE_PRODUCT_DETAILS_UNVERIFIED = 3;
  }
  Type type = 1;

  string ci_fid = 2 [deprecated = true]; // from old, pre-M1 implementation

  oneof commercial_invoice_line_item_context {
    ProductDetailsUnverifiedContext product_details_unverified_context = 3;
  }

  message ProductDetailsUnverifiedContext {
    string commercial_invoice_fid = 1;
    string commercial_invoice_line_item_fid = 2;
    bool is_ai_transcription_incomplete = 3;
  }
}
