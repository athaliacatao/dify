// TEAM: capital

syntax = "proto3";

package flexport.capital.repaymentschedule.v1beta1;

import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";
import "google/type/decimal.proto";

option java_multiple_files = true;
option java_outer_classname = "RepaymentScheduleProto";
option java_package = "com.flexport.capital.repaymentschedule.v1beta1";
option ruby_package = "Flexport::Capital::RepaymentSchedule::V1Beta1";

enum RepaymentStatus {
  REPAYMENT_STATUS_INVALID = 0;
  REPAYMENT_STATUS_UNPAID = 1;
  REPAYMENT_STATUS_PAID = 2;
  REPAYMENT_STATUS_PARTIAL = 3;
  REPAYMENT_STATUS_OVERDUE = 4;
}

message RepaymentSchedule {
  string loan_id = 1;
  string client_id = 2;
  int64 amount = 3;
  string currency_code = 4;
  string due_date = 5;
  // Optional
  int64 paid_amount = 6;
  RepaymentStatus status = 7;
  string capital_invoice_id = 8;
  int64 principle = 9;
  int64 fee = 10;
  // Only used in response
  string schedule_id = 11;
  string invoice_id = 12;
  int64 amount_usd = 13;
  int64 paid_amount_usd = 14;
  int64 principal_amount_usd = 15;
  int64 fee_amount_usd = 16;
  google.type.Decimal exchange_rate = 17;
  google.protobuf.StringValue exchange_rate_fid = 18;
  google.protobuf.StringValue capital_invoice_fid = 19;
  google.protobuf.Timestamp created_at_time = 20;
  google.protobuf.Timestamp updated_at_time = 21;
}

message RepaymentStatusFilterValue {
  repeated RepaymentStatus values = 2;
}

message RepaymentScheduleFilters {
  google.protobuf.StringValue client_id = 1;
  RepaymentStatusFilterValue status = 2;
  google.protobuf.Timestamp due_date_after_time = 3;
  google.protobuf.Timestamp due_date_before_time = 4;
  google.protobuf.StringValue search_parameters = 5;
}

message Payment {
  string payment_fid = 1;
  string repayment_schedule_fid = 2;
  string currency_code = 3;
  int64 amount = 4;
  int64 amount_usd = 5;
  google.protobuf.StringValue payment_line_item_fid = 6;
  google.protobuf.Timestamp effective_at_time = 7;
  google.protobuf.StringValue canopy_line_item_id = 8;
  google.protobuf.Timestamp created_at_time = 9;
  google.protobuf.Timestamp updated_at_time = 10;
}

message Refund {
  string refund_fid = 1;
  string repayment_schedule_fid = 2;
  string payment_fid = 3;
  string currency_code = 4;
  int64 amount = 5;
  int64 amount_usd = 6;
  google.protobuf.StringValue refund_line_item_fid = 7;
  google.protobuf.Timestamp effective_at_time = 8;
  google.protobuf.StringValue canopy_line_item_id = 9;
  google.protobuf.Timestamp created_at_time = 10;
  google.protobuf.Timestamp updated_at_time = 11;
}
