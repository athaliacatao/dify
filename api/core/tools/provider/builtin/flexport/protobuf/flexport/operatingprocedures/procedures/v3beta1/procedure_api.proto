// TEAM: work_management

syntax = "proto3";

package flexport.operatingprocedures.procedures.v3beta1;

import "flexport/operatingprocedures/procedures/v3beta1/procedure.proto";

option java_multiple_files = true;
option java_outer_classname = "ProcedureApiProto";
option java_package = "com.flexport.operatingprocedures.procedures.v3beta1";
option ruby_package = "Flexport::OperatingProcedures::Procedures::V3Beta1";

// The protocol for retrieving all procedures of a given category from the operating_procedures service.
service ProcedureAPI {
  // Retrieves a list of Procedures for a given procedure type, client fid and criteria.
  rpc GetFilteredProcedures(GetFilteredProceduresRequest) returns (GetFilteredProceduresResponse);
  // Retrieves a list of Procedures for a given procedure type, list of client fids, and criteria.
  rpc GetMultipleClientsFilteredProcedures(GetMultipleClientsFilteredProceduresRequest) returns (GetMultipleClientsFilteredProceduresResponse);
  // Retrieves a list of matching procedures given a procedures type and a shipment fid.
  rpc GetProceduresMatchingShipment(GetProceduresMatchingShipmentRequest) returns (GetProceduresMatchingShipmentResponse);
}

// The request structure for GetFilteredProcedures: procedure type, client fid, criteria.
message GetFilteredProceduresRequest {
  string procedure_type = 1;
  string client_fid = 2;
  repeated Attribute criteria = 3;
}

// The request structure for GetFilteredProcedures: procedure type, client fid, criteria.
message GetMultipleClientsFilteredProceduresRequest {
  string procedure_type = 1;
  repeated string client_fids = 2;
  repeated Attribute criteria = 3;
}

// The request structure for GetProceduresMatchingShipmentRequest: procedure type and shipment_fid.
message GetProceduresMatchingShipmentRequest {
  string procedure_type = 1;
  string shipment_fid = 2;
}

// The response structure for GetFilteredProcedures: list of procedures.
message GetFilteredProceduresResponse {
  repeated Procedure procedures = 1;
}

// The response structure for message GetMultipleClientsFilteredProcedures: list of procedures.
message GetMultipleClientsFilteredProceduresResponse {
  repeated Procedure procedures = 1;
}

// The response structure for GetProceduresMatchingShipmentRequest: list of procedures.
message GetProceduresMatchingShipmentResponse {
  repeated Procedure procedures = 1;
}
