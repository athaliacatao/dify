// TEAM: kingsroad

syntax = "proto3";

package flexport.monolith.customsclient.v1beta1;

option java_multiple_files = true;
option java_outer_classname = "CustomsClientApiProto";
option java_package = "com.flexport.monolith.customsclient.v1beta1";
option ruby_package = "Flexport::Monolith::CustomsClient::V1Beta1";

service CustomsOnboardingAPI {
  rpc ListClientOnboardingStatus(ListClientOnboardingStatusRequest) returns (ListClientOnboardingStatusResponse);

  rpc GetCompanyEntityInfo(GetCompanyEntityInfoRequest) returns (GetCompanyEntityInfoResponse);

  rpc IsBlockByCustomsOnboarding(IsBlockByCustomsOnboardingRequest) returns (IsBlockByCustomsOnboardingResponse);
}

message GetCompanyEntityInfoRequest {
  string company_entity_fid = 1;
}

// Base message for Customs Specific Client Entity information, feel free to extend when you need more information
message GetCompanyEntityInfoResponse {
  int32 company_entity_dbid = 1;
  string company_entity_fid = 2;
  repeated EntityVatNumber company_entity_vat_numbers = 3;
}

message EntityVatNumber {
  string country_code = 2;
  string vat_number = 3;
}

message ListClientOnboardingStatusRequest {
  string client_fid = 1;
}

message ListClientOnboardingStatusResponse {
  repeated EntityOnboardingStatus entities_onboarding_status = 1;
}

message EntityOnboardingStatus {
  CompanyEntity company_entity = 1;
  bool is_onboarded = 2;
}

message CompanyEntity {
  int32 id = 1;
}

message IsBlockByCustomsOnboardingRequest {
  string shipment_fid = 1;
}
message IsBlockByCustomsOnboardingResponse {
  bool is_blocked = 1;
}
