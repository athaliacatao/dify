// TEAM: unified_shipment_schedules

syntax = "proto3";

package flexport.schedulemanager.automationstate.v1;

import "google/protobuf/timestamp.proto";

option java_multiple_files = true;
option java_outer_classname = "AutomationStateAPIProto";
option java_package = "com.flexport.schedulemanager.automationstate.v1";
option ruby_package = "Flexport::ScheduleManager::AutomationState::V1";

// API for interacting with shipment schedule automation state.
service AutomationStateAPI {
  // Retrieves automation state for a shipment schedule.
  rpc GetAutomationState(GetAutomationStateRequest) returns (GetAutomationStateResponse);
}

// The request for shipment schedule automation state.
message GetAutomationStateRequest {
  string shipment_fid = 1;
}

// The response message containing shipment schedule automation state.
message GetAutomationStateResponse {
  NullableAutomationState nullable_automation_state = 2;
}

// A wrapper for is_automation_on to make it nullable.
message NullableAutomationState {
  bool is_automation_on = 1;
  string fid = 2;
  string shipment_fid = 3;
  string updated_by_fid = 4;
  google.protobuf.Timestamp updated_at = 5;
  IgnoreAutomationMetadata ignore_automation_reason = 6;
}

message IgnoreAutomationMetadata {
  string reason_code = 1;
  string source_type = 2;
  string exception_type = 3;
  string description = 4;
}
