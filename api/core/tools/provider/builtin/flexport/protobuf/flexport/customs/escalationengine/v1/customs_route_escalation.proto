// TEAM: customs_platform

syntax = "proto3";

package flexport.customs.escalationengine.v1;

option java_multiple_files = true;
option java_outer_classname = "CustomsRouteEscalationProto";
option java_package = "com.flexport.customs.escalationengine.v1";
option ruby_package = "Flexport::Customs::EscalationEngine::V1";

message CustomsRouteEscalation {
  enum Type {
    TYPE_INVALID = 0;
    TYPE_REQUIRED_DATA_MISSING = 1;
    TYPE_REQUIRED_DESTINATION_DATA_MISSING = 2;
  }
  Type type = 1;

  oneof context {
    RequiredDataMissingContext required_data_missing_context = 2;
    RequiredDestinationDataMissingContext required_destination_data_missing_context = 3;
  }

  // One ore more required fields are missing and/or contain incorrect data
  message RequiredDataMissingContext {
    message InvalidField {
      // This should contain a JsonPath reference to a field of the route as per ADR-9
      string field = 1;
      string message = 2;
    }

    repeated InvalidField invalid_fields = 1;

    // These should contain a JsonPath reference to a field of the route as per ADR-9. All fields that are required
    // should be included in this list. Even the ones that already have a value.
    repeated string required_fields = 2;
  }

  message RequiredDestinationDataMissingContext {
    // These should contain a JsonPath reference to a field of the route as per ADR-9. All fields that are required
    // should be included in this list. Even the ones that already have a value.
    repeated string required_fields = 1;
  }
}
