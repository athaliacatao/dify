// TEAM: finance_platform

syntax = "proto3";

package flexport.payments.invoice.v1beta1;

import "flexport/payments/invoice/date/v1/date.proto";
import "google/protobuf/struct.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";

option java_multiple_files = true;
option java_outer_classname = "InvoiceProto";
option java_package = "com.flexport.payments.invoice.v1beta1";
option ruby_package = "Flexport::Payments::Invoice::V1Beta1";

// The services sold by flexport which can be invoiced.
enum Invoiceable {
  INVOICEABLE_INVALID = 0;
  INVOICEABLE_SHIPMENT = 1;
  INVOICEABLE_CLIENT = 2;
}

// Payment status for invoices.
enum InvoiceStatus {
  INVOICE_STATUS_INVALID = 0;
  INVOICE_STATUS_PAST_DUE = 1;
  INVOICE_STATUS_PAID = 2;
  INVOICE_STATUS_VOID = 3;
  INVOICE_STATUS_PAYMENT_PENDING = 4;
  INVOICE_STATUS_OUTSTANDING = 5;
}

// An item on an invoice.
message Item {
  string amount_micros = 1;
  string category = 2;
  string currency_code = 3;
  string name = 4;
  string raw_category = 5;
  google.protobuf.Struct meta = 6;
  string quantity_description = 7;
  string rate_description = 8;
  repeated string container_numbers = 9;
  string slug = 10;
  google.protobuf.Struct rate_attributes = 11;
  google.protobuf.Struct quantity_attributes = 12;
  string fid = 13;
}

// An request for payment to flexport sent to a client.
message Invoice {
  string fid = 1;
  string name = 2;
  flexport.payments.invoice.date.v1.Date due_date = 3;
  google.protobuf.Timestamp issued_at_time = 4;
  string currency_code = 5;
  google.protobuf.Struct display_context = 6;
  string formatted_notes = 7;
  int32 invoiceable_subledger_account_id = 8;
  int32 issuing_entity_id = 9;
  int32 receiving_entity_id = 10;
  google.protobuf.Struct issuing_entity_json = 11;
  google.protobuf.Struct receiving_entity_json = 12;
  string is_late_fee_invoice = 13;
  repeated Item items = 14;
  Invoiceable invoiceable_type = 15;
  int32 core_id = 16;
  int32 amount_paid = 17;
  int32 amount_remaining = 18;
  google.protobuf.BoolValue will_be_financed = 19;
  google.protobuf.Timestamp updated_at_time = 20;
}

// Filter Dto to retrieve invoices.
message InvoiceFilterDto {
  // this is a workaround for prototool linter.
  repeated string uu_ids = 1;
  repeated int32 receiving_entity_id = 2;
  repeated int32 issuing_entity_id = 3;
  repeated int32 ids = 4;
  repeated int32 negated_ids = 5;
  repeated string currency_code = 6;
  repeated InvoiceStatus statuses = 7;
  repeated string final_delivery_ports = 8;
  repeated string final_destination_countries = 9;
  flexport.payments.invoice.date.v1.Date due_date_start_date = 10;
  flexport.payments.invoice.date.v1.Date due_date_end_date = 11;
  flexport.payments.invoice.date.v1.Date share_date_start_date = 12;
  flexport.payments.invoice.date.v1.Date share_date_end_date = 13;
  flexport.payments.invoice.date.v1.Date delivery_date_start_date = 14;
  flexport.payments.invoice.date.v1.Date delivery_date_end_date = 15;
  flexport.payments.invoice.date.v1.Date issued_at_start_date = 16;
  flexport.payments.invoice.date.v1.Date issued_at_end_date = 17;
  flexport.payments.invoice.date.v1.Date amended_at_start_date = 18;
  flexport.payments.invoice.date.v1.Date amended_at_end_date = 19;
  google.protobuf.BoolValue shared = 20;
  google.protobuf.BoolValue unconsolidated = 21;
  google.protobuf.StringValue name = 22;
  google.protobuf.Int32Value subscribed_by_id = 23;
  google.protobuf.StringValue receiving_company_id = 24;
  google.protobuf.StringValue issuing_company_id = 25;
  google.protobuf.Int32Value shipment_id = 26;
}
