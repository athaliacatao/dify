// TEAM: kingsroad

syntax = "proto3";

package flexport.executionmilestones.shipmentstate.v1beta1;

import "flexport/executioncoordinator/executiontaskstateevent/v1/details/ocean_carrier_booking_mismatch_detection_updated.proto";
import "google/protobuf/timestamp.proto";

option java_multiple_files = true;
option java_outer_classname = "OceanCarrierBookingMismatchStateProto";
option java_package = "com.flexport.executionmilestones.shipmentstate.v1beta1";
option ruby_package = "Flexport::ExecutionMilestones::ShipmentState::V1Beta1";

// The State to store carrier booking mismatch data in EMS.
message OceanCarrierBookingMismatchState {
  string shipment_fid = 1;
  // a map of carrier booking fid to its map of mismatches
  map<string, OceanCarrierBookingMismatches> mismatches_by_carrier_booking = 2;
}

// A list of mismatches for the same carrier booking
message OceanCarrierBookingMismatches {
  // a map of mismatch type to the actual event
  map<string, OceanCarrierBookingMismatch> mismatches_by_type = 1;
}

// A mismatch event with states.
message OceanCarrierBookingMismatch {
  flexport.executioncoordinator.executiontaskstateevent.v1.OceanCarrierBookingMismatchDetectionUpdated mismatch_detection_update = 1;
  bool is_ignored = 2;
  google.protobuf.Timestamp update_at = 3;
  string updated_by_user_fid = 4;
}
