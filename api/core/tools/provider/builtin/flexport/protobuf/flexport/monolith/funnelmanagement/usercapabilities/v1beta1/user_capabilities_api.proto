// TEAM: trucking_carriers

syntax = "proto3";

package flexport.monolith.funnelmanagement.usercapabilities.v1beta1;

import "flexport/monolith/funnelmanagement/affiliation/v1beta1/affiliation.proto";
import "google/protobuf/wrappers.proto";

option java_multiple_files = true;
option java_outer_classname = "UserCapabilitiesApiProto";
option java_package = "com.flexport.monolith.funnelmanagement.usercapabilities.v1beta1";
option ruby_package = "Flexport::Monolith::FunnelManagement::UserCapabilities::V1Beta1";

// The user capabilities service definition.
service UserCapabilitiesAPI {
  rpc UserCapabilities(UserCapabilitiesRequest) returns (UserCapabilitiesResponse);
}

// The request message for UserCapabilities service.
message UserCapabilitiesRequest {
  string user_email = 1;
}

// The response message for UserCapabilities service.
message UserCapabilitiesResponse {
  ConfirmedUserCapabilities confirmed_user_capabilities = 1;
  CarrierInfo carrier_info = 2;
  string affiliated_to_dot = 3;
  OnboardingStatus onboarding_status = 4;
  flexport.monolith.funnelmanagement.affiliation.v1beta1.AffiliationStatus affiliation_status = 5;
  int32 carrier_score = 6;
  repeated CarrierDocument carrier_documents = 7;
}

message ConfirmedUserCapabilities {
  string full_name = 1;
  string email = 2;
  string phone = 3;

  google.protobuf.BoolValue has_twic_certificate = 4;
  string operational_city = 5;
  string operational_country_code = 6;
  string operational_postal_code = 7;
  string operational_state_or_province = 8;

  google.protobuf.BoolValue owns_or_leases_trailer = 9;
  google.protobuf.BoolValue owns_or_leases_truck_tractor = 10;

  string affiliated_to_dot = 11;

  repeated JobTypeWrapper allowed_job_types = 12;
}

enum OnboardingStatus {
  ONBOARDING_STATUS_INVALID = 0;
  ONBOARDING_STATUS_INCOMPLETE = 1;
  ONBOARDING_STATUS_COMPLETE = 2;
}

message JobTypeWrapper {
  JobType job_type = 1;
}

enum JobType {
  JOB_TYPE_INVALID = 0;
  JOB_TYPE_DRAYAGE = 1;
  JOB_TYPE_FTL = 2;
  JOB_TYPE_LTL = 3;
  JOB_TYPE_CARTAGE = 4;
}

message CarrierInfo {
  int32 carrier_id = 1;
  string carrier_name = 2;
  int32 carrier_score = 3;
  repeated CarrierDocument carrier_documents = 4;
}

message CarrierDocument {
  string document_type = 1;
  string document_id = 2;
  string document_verifications_status = 3;
  google.protobuf.BoolValue document_is_expired = 4;
}
