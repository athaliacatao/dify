// TEAM: billing

syntax = "proto3";

package flexport.billing.entityevent.v1beta1;

import "flexport/billing/entityevent/v1beta1/shared.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";

option java_multiple_files = true;
option java_outer_classname = "RawBillEntityProto";
option java_package = "com.flexport.billing.entityevent.v1beta1";
option ruby_package = "Flexport::Billing::EntityEvent::V1Beta1";

// The RawBill entity object.
message RawBillEntity {
  string fid = 1;
  google.protobuf.StringValue bill_grouping_fid = 2;
  google.protobuf.StringValue bill_number = 3;
  google.protobuf.StringValue issuing_entity_fid = 4;
  google.protobuf.StringValue receiving_entity_fid = 5;
  string vendor_fid = 6;
  google.protobuf.Timestamp due_at_time = 8;
  google.protobuf.Timestamp issued_at_time = 9;
  google.protobuf.Timestamp invalidated_at_time = 10;
  google.protobuf.StringValue invalidated_by_fid = 11;
  google.protobuf.StringValue outdated_by_fid = 12;
  AssociatedDocumentsValue associated_documents = 13;
  repeated string bill_grouping_identifiers = 14;
  repeated RawBillAllocationValue allocations = 15;
  google.protobuf.Timestamp created_at_time = 16;
  google.protobuf.Timestamp updated_at_time = 17;
  RawBillType raw_bill_type = 18 [deprecated = true];
  TransactionType transaction_type = 19;
}

enum RawBillType {
  RAW_BILL_TYPE_INVALID = 0;
  RAW_BILL_TYPE_INVOICE = 1;
  RAW_BILL_TYPE_CREDIT_NOTE = 2;
  RAW_BILL_TYPE_DEBIT_NOTE = 3;
  RAW_BILL_TYPE_NON_BILLING = 4;
}

// The AssociatedDocuments value object.
message AssociatedDocumentsValue {
  string duplication_group_fid = 1;
  repeated AssociatedDocumentValue associated_documents = 2;
  DigitizationMethod digitization_method = 3;
}

// The AssociatedDocument value object.
message AssociatedDocumentValue {
  string document_fid = 1;
  DocumentSource source = 2;
  google.protobuf.Timestamp received_at_time = 3;
  google.protobuf.Timestamp created_at_time = 4;
}

// The RawBillAllocation value object.
message RawBillAllocationValue {
  string fid = 1;
  google.protobuf.StringValue supply_service_fid = 2;
  repeated RawBillItemValue items = 3;
  google.protobuf.StringValue shipment_fid = 4;
  google.protobuf.StringValue reference_number = 5;
  ReferenceType reference_type = 6;
}

// The RawBillItem value object.
message RawBillItemValue {
  string fid = 1;
  google.protobuf.StringValue amount = 2;
  google.protobuf.StringValue currency_code = 3;
  google.protobuf.StringValue line_item_mapping_fid = 4;
  google.protobuf.StringValue vendor_text = 5;
}
