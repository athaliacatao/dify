// TEAM: cost_capture

syntax = "proto3";

package flexport.subledger.transaction.v1beta1;

option java_multiple_files = true;
option java_outer_classname = "TransactionProto";
option java_package = "com.flexport.subledger.transaction.v1beta1";
option ruby_package = "Flexport::Subledger::Transaction::V1Beta1";

import "flexport/subledger/entry/v1beta1/entry.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";

// Subledger transaction context attributes record.
message ContextAttributesDto {
  string json = 5;
}

// Subledger transaction record.
message TransactionDto {
  google.protobuf.StringValue fid = 1;
  string reference = 2;
  repeated entry.v1beta1.EntryDto entries = 3;
  google.protobuf.Timestamp created_at_time = 4;
  ContextAttributesDto context_attributes = 5;
}

// Subledger transactions collection.
message TransactionsDto {
  repeated TransactionDto transactions = 1;
}

// Transaction query filters.
message TransactionFiltersDto {
  repeated string fids = 1;
  repeated string references = 2;
  repeated string account_fids = 3;
  google.protobuf.StringValue reference_match = 4;
  repeated string entry_fids = 5;
}

// Transaction item parameter.
message TransactionItemDto {
  sint64 amount_micros = 1;
  string currency_code = 2;
  entry.v1beta1.ContextAttributesDto context = 3;
}

// Transaction entry parameter.
message TransactionEntryDto {
  string account_fid = 1;
  sint64 amount_micros = 2;
  string currency_code = 3;
  entry.v1beta1.ContextAttributesDto context = 4;
}
