// TEAM: forwarding_platform

syntax = "proto3";

package flexport.executioncoordinator.executionoverride.v1;

option java_multiple_files = true;
option java_outer_classname = "ExecutionOverrideApiProto";
option java_package = "com.flexport.executioncoordinator.executionoverride.v1";
option ruby_package = "Flexport::ExecutionCoordinator::ExecutionOverride::V1";

import "flexport/executioncoordinator/executionoverride/v1/execution_override.proto";
import "flexport/executioncoordinator/executionoverride/v1/execution_override_status.proto";
import "flexport/executioncoordinator/executionoverride/v1/execution_override_status_info.proto";

// An API for interacting with ExecutionOverride entities.
service ExecutionOverrideAPI {
  // Retrieves an ExecutionOverride.
  rpc GetExecutionOverride(GetExecutionOverrideRequest) returns (GetExecutionOverrideResponse);
  // Retrieves status infos for an ExecutionOverride.
  rpc GetExecutionOverrideStatus(GetExecutionOverrideStatusRequest) returns (GetExecutionOverrideStatusResponse);
}

// The request message for GetExecutionOverride.
message GetExecutionOverrideRequest {
  string fid = 1;
}

// The response message for GetExecutionOverride.
message GetExecutionOverrideResponse {
  ExecutionOverride execution_override = 1;
}

// The request message for GetExecutionOverrideStatus.
message GetExecutionOverrideStatusRequest {
  string fid = 1;
}

// The response message for GetExecutionOverrideStatus.
message GetExecutionOverrideStatusResponse {
  // Status of the override; i.e. pending, succeeded, failed.
  ExecutionOverrideStatus overall_status = 1;
  // Detailed timestamps for monitoring writebacks from an execution order revision.
  ExecutionOverrideStatusInfo eo_revision_status_info = 2;
  // Detailed timestamps for monitoring writebacks from an execution plan revision.
  ExecutionOverrideStatusInfo ep_revision_status_info = 3;
  // A map of etse fids to their detailed timestamps for monitoring writebacks.
  map<string, ExecutionOverrideStatusInfo> etse_status_infos = 4;
  // A map of eose fids to their detailed timestamps for monitoring writebacks.
  map<string, ExecutionOverrideStatusInfo> eose_status_infos = 5;
}
