// TEAM: dot_org

syntax = "proto3";

package flexport.dotorg.carbonoffsets.events.v1beta1;

option java_multiple_files = true;
option java_outer_classname = "CarbonOffsetsUpdatedProto";
option java_package = "com.flexport.dotorg.carbonoffsets.events.v1beta1";
option ruby_package = "Flexport::DotOrg::CarbonOffsets::Events::V1Beta1";

import "flexport/executioncoordinator/executiontask/v1/params/carbon_services_task_params.proto";

// Event emitted when a carbon offset is updated.
message CarbonOffsetsUpdated {
  // shipment FID or Third Party Analysis document FID
  string calculatable_id = 1;
  oneof offsettable_id {
    string shipment_leg_fid = 7;
    NonFlexportShipmentRowId non_flexport_shipment_row_id = 8;
  }
  string tonnes_of_co2 = 3;
  flexport.executioncoordinator.executiontask.v1.OffsetType offset_type = 4;
  flexport.executioncoordinator.executiontask.v1.OffsetVendor vendor = 5;
  float rate = 6;
  // Unique ID for a row is generated by a hash of the unique_document_upload_id and the row number.
  message NonFlexportShipmentRowId {
    string unique_document_upload_id = 1;
    string row_number = 2;
  }
}
