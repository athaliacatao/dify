// TEAM: procurement

syntax = "proto3";

package flexport.procurement.storage.bin.snowflake.v1beta1;

import "flexport/procurement/rates/v2/fcl_rates.proto";
import "google/protobuf/wrappers.proto";
import "google/type/date.proto";

option java_multiple_files = true;
option java_outer_classname = "SurchargeRateItemEntityProto";
option java_package = "com.flexport.procurement.storage.bin.snowflake.v1beta1";
option ruby_package = "Flexport::Procurement::Storage::Bin::Snowflake::V1Beta1";

message SurchargeRateItemEntity {
  string row_id = 1; // e.g., "FEWB-123"

  google.protobuf.StringValue carrier_scac = 2; // optional. null means any
  google.protobuf.StringValue contract_number = 3; // optional. null means any
  /**
   * A list of service string restrictions for the surcharge.
   * A rate query contains a single service string, and the surcharge will apply
   * if the rate query matches **any** of the strings in this list.
   *
   * If this list is empty, the surcharge is considered unrestricted
   * and can apply to any service.
   */
  repeated string service_string_names = 4;

  /**
   * A list of client ID restrictions for the surcharge.
   * A rate query contains a single client ID, and the surcharge will apply
   * if the rate query matches **any** of the client IDs in this list.
   *
   * If this list is empty, the surcharge is considered unrestricted
   * and can apply to any client.
   */
  repeated int64 client_ids = 5;

  google.protobuf.StringValue premium_service_slug = 6; // nullable, for premium service specificity

  bool dg_only = 7; // If true, this surcharge only applies to dg shipments.
  bool reefer_only = 8; // If true, this surcharge only applies for refrigerated containers.

  string route_display_value = 9; // for human recognition

  google.type.Date valid_from = 10; // required, inclusive
  google.type.Date valid_to = 11; // optional, inclusive (when set)

  /*
   * This field represents the flat cost per shipment in micros.
   *
   * Priority rules:
   * 1. If `flat_cost_per_shipment_micros` is set, any per-container costs (e.g., `cost_per_forty_five_ft_hc_micros`) should be null and can be ignored.
   * 2. If `flat_cost_per_shipment_micros` is null and a per-container cost (e.g., `cost_per_forty_five_ft_hc_micros`) is set, use the per-container cost.
   * 3. If both `flat_cost_per_shipment_micros` and the per-container costs are null, it indicates that the surcharge applies, but we don't have a value for it, so this case is considered unsupported and should raise an error.
   */
  google.protobuf.Int64Value flat_cost_per_shipment_micros = 12;

  google.protobuf.Int64Value cost_per_twenty_ft_micros = 13; // nullable, 22G0 cost
  google.protobuf.Int64Value cost_per_forty_ft_micros = 14; // nullable, 42G0 cost
  google.protobuf.Int64Value cost_per_forty_ft_hc_micros = 15; // nullable, 45G0 cost
  google.protobuf.Int64Value cost_per_forty_five_ft_hc_micros = 16; // nullable, L5G0 cost

  string source_charge_name = 17; // carrier-provided charge name. required

  string notes = 18; // nullable, for notes

  string reference_source = 19; // where the operator got the info (contract, email, website)
  string last_validated = 20; // last validation date
  procurement.rates.v2.Variant variant = 21; // required
  string currency_code = 24; // required
}
