// TEAM: unified_shipment_schedules

syntax = "proto3";

package flexport.otp.v1beta1;

import "flexport/os/v1/types/walltimedate/v1/wall_time_date.proto";
import "flexport/os/v1/types/walltimedateordatetime/v1/wall_time_date_or_date_time.proto";
import "flexport/os/v1/types/walltimedatetime/v1/wall_time_date_time.proto";
import "flexport/otp/v1beta1/time.proto";

option java_multiple_files = true;
option java_outer_classname = "TimelineProto";
option java_package = "com.flexport.otp.v1beta1";
option ruby_package = "Flexport::Otp::V1Beta1";

message Timeline {
  string fid = 1;
  string execution_order_fid = 2;
  string shipment_fid = 3;
  flexport.os.v1.types.walltimedate.v1.WallTimeDate global_target_delivery_date = 4 [deprecated = true];
  flexport.os.v1.types.walltimedatetime.v1.WallTimeDateTime completed_at = 5;
  map<string, string> quoted_slas = 6;
  bool schedule_confirmed = 7;
  map<string, string> properties = 8;
  // TODO(yli7): deprecate transit_time and delivery_date on top level
  int64 ote_transit_time = 10;
  flexport.os.v1.types.walltimedateordatetime.v1.WallTimeDateOrDateTime ote_delivery_date = 11;
  flexport.os.v1.types.walltimedate.v1.WallTimeDate cargo_ready_date = 12;

  OteMetadata ote_metadata = 13;
}

message OteMetadata {
  int64 transit_time = 1;
  flexport.os.v1.types.walltimedateordatetime.v1.WallTimeDateOrDateTime delivery_date = 2;
  flexport.os.v1.types.walltimedateordatetime.v1.WallTimeDateOrDateTime service_start_date = 3;
  TimeType service_start_date_type = 4;
}
