// TEAM: customs_platform

syntax = "proto3";

package flexport.customs.taskmanager.events.v1;

import "flexport/customs/taskmanager/task/v1/task.proto";
import "google/protobuf/timestamp.proto";

option java_multiple_files = true;
option java_outer_classname = "TaskEventProto";
option java_package = "com.flexport.customs.taskmanager.events.v1";
option ruby_package = "Flexport::Customs::TaskManager::Events::V1";

message TaskEvent {
  // Unique event identifier
  string uuid = 1;
  // Current state of task entity
  flexport.customs.taskmanager.task.v1.Task task = 2;

  Type event_type = 3;
  enum Type {
    TYPE_INVALID = 0;
    TYPE_CREATED = 1;
    TYPE_UPDATED = 2;
    // This can be both due to completed, reported or not_required status change
    TYPE_RESOLVED = 3;
  }

  google.protobuf.Timestamp timestamp = 4;
  Source source = 5;

  enum Source {
    SOURCE_INVALID = 0;
    // Task event happened because of a m2m API interaction
    SOURCE_API = 1;
    // Task event happened because of a user GraphQL mutation
    SOURCE_USER = 2;
  }

  // Flexport user fid if the event was triggered by a user
  optional string user_fid = 6;
}
