// TEAM: sutro

syntax = "proto3";

package flexport.executionmilestones.emptycontainerreturnstate.v1;

option java_multiple_files = true;
option java_outer_classname = "EmptyContainerReturnStateProto";
option java_package = "com.flexport.executionmilestones.emptycontainerreturnstate.v1";
option ruby_package = "Flexport::ExecutionMilestones::emptycontainerreturnstate::V1";

// Represent empty container return state.
// Next ID: 3
message EmptyContainerReturnState {
  // the key should be container_fid
  map<string, ExceptionsByTime> exceptions_for_containers = 1;

  // the key should be container_fid
  map<string, OperatorDidWorkByTime> operator_did_work = 2;

  message Exceptions {
    repeated string exception = 1;
  }

  // We need to add these as messages because proto doesn't support
  // nested maps.
  message ExceptionsByTime {
    // map of exceptions by WallTimeDate, as WallTimeDate is not supported as map key.
    // need to get seconds and cast to int64
    map<int64, Exceptions> exception_by_time = 1;
  }

  message OperatorDidWorkByTime {
    // map of operator_did_work by WallTimeDate
    map<int64, bool> operator_did_work_by_time = 1;
  }
}
