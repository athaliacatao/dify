// TEAM: smb_scone

syntax = "proto3";

package flexport.monolith.smb.v1beta1;

import "google/protobuf/wrappers.proto";

option java_multiple_files = true;
option java_outer_classname = "EINValidationApiProto";
option java_package = "com.flexport.monolith.smb.v1beta1";
option ruby_package = "Flexport::Monolith::Smb::V1Beta1";

// An API for data exchange between Core and SMB NIS.
service EinValidationAPI {
  rpc SynchronousValidateAndSave(SynchronousValidateAndSaveRequest) returns (SynchronousValidateAndSaveResponse);
}

enum TaxIdType {
  TAX_ID_TYPE_INVALID = 0;
  TAX_ID_TYPE_UNKNOWN = 1;
  TAX_ID_TYPE_EIN = 2;
  TAX_ID_TYPE_CAIN = 3;
  TAX_ID_TYPE_SSN = 4;
}

enum VerifyStatuses {
  VERIFY_STATUSES_INVALID = 0;
  VERIFY_STATUSES_UNCHECKED = 1;
  VERIFY_STATUSES_VERIFIED = 2;
  VERIFY_STATUSES_UNVERIFIABLE = 3;
  VERIFY_STATUSES_UNKNOWN = 4;
}

message SynchronousValidateAndSaveRequest {
  int32 requested_by_id = 1;
  google.protobuf.StringValue ein_number = 2;
  google.protobuf.StringValue company_name = 3;
}

message SynchronousValidateAndSaveResponse {
  google.protobuf.StringValue ein_number = 1;
  VerifyStatuses verified = 2;
  TaxIdType tax_id_type = 3;
  repeated google.protobuf.StringValue errors = 4;
}
