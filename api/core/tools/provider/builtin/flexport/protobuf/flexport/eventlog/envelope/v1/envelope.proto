// TEAM: service_platform

syntax = "proto3";

package flexport.eventlog.envelope.v1;

option java_multiple_files = true;
option java_outer_classname = "EnvelopeProto";
option java_package = "com.flexport.eventlog.envelope.v1";
option ruby_package = "Flexport::EventLog::Envelope::V1";

import "google/protobuf/any.proto";
import "google/protobuf/timestamp.proto";

// An envelope wraps around an event to carry additional information about the
// event. This is the primary object published/consumed by the event log.
message Envelope {
  // A random UUID identifying a specific envelope
  string id = 1;
  // The primary event payload
  google.protobuf.Any event = 2;
  // Epoch time when the event was created
  google.protobuf.Timestamp created_time = 3;
  // The git SHA of the current version of the code
  string git_revision_sha = 4;
  // The name of the topic/stream
  string topic = 5;
  // The criteria to group events by shard within a stream
  string partition_key = 6;
  // The id of the sandbox or devbox that publishes this event.
  string environment_id = 7;
  // The trace context map for context propagation in distributed tracing.
  map<string, string> trace_context = 8;
}
