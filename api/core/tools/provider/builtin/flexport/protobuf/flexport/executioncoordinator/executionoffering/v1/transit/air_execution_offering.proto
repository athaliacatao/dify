// TEAM: forwarding_platform

syntax = "proto3";

package flexport.executioncoordinator.executionoffering.v1;

import "flexport/executioncoordinator/executionoffering/v1/transit/auxiliary_trucking.proto";
import "flexport/executioncoordinator/executionoffering/v1/transit/common.proto";
import "flexport/os/v1/types/walltimedate/v1/wall_time_date.proto";

option java_multiple_files = true;
option java_outer_classname = "AirExecutionOfferingProto";
option java_package = "com.flexport.executioncoordinator.executionoffering.v1";
option ruby_package = "Flexport::ExecutionCoordinator::ExecutionOffering::V1";

// An ExecutionOffering for cargo moved via air freight (consolidated or not).
// More details on go/execution-offering wiki.
message AirExecutionOffering {
  // See go/pickups-and-deliveries wiki.
  repeated AuxiliaryTruckingPickup pickups = 14;
  repeated AuxiliaryTruckingDelivery deliveries = 15;

  // See go/transloading wiki.
  repeated AuxiliaryOriginTransloadingTrucking origin_transloading_truckings = 20;
  repeated AuxiliaryDestinationTransloadingTrucking destination_transloading_truckings = 21;

  repeated DestinationSorting destination_sortings = 24;

  oneof carrier {
    SpecificCarrier specific_carrier = 7;
    OpenCarrier open_carrier = 8;
  }
  oneof route {
    AirSpecificRoute specific_route = 9;
    OpenRoute open_route = 10;
  }
  AirRole main_freight_role = 1;
  //
  // The service tier associated with a Flexport air shipment.
  // Current service levels offered for air are standard, express, and deferred.
  string main_freight_service_level = 19;
  ServiceLevel main_freight_service_level_enum = 22;
  AirTransitTime quoted_transit_time = 16;
  AirOteMilestones ote_milestones = 23;
  string freight_partner_fid = 11;
  AirQuotedSellRate quoted_sell_rate = 18;
}

// The role Flexport has in main freight air movement.
//
// Note that unlike for ocean shipments, Flexport does not facilitate the movement of cargo on
// client-arranged air contracts. See the wiki http://go/air-contracts-on-order for details.
enum AirRole {
  AIR_ROLE_INVALID = 0;
  //
  // Flexport coordinates air movement on a Flexport-arranged buy-side contract.
  AIR_ROLE_FULL_SERVICE = 1;
  //
  // Flexport has no direct involvement in air movement. This includes "visibility-only" tracking.
  AIR_ROLE_NO_INVOLVEMENT = 2;
}

// A specific air route.
message AirSpecificRoute {
  string origin_cfs_fid = 1;
  string origin_airport_fid = 2;
  repeated string via_airport_fids = 3;
  string destination_airport_fid = 4;
  string destination_cfs_fid = 5;
}

// Transit time for an air shipment.
message AirTransitTime {
  int32 min_hours = 2;
  int32 max_hours = 3;
  AirTransitTimeStart start = 4;
  AirTransitTimeEnd end = 5;
  flexport.os.v1.types.walltimedate.v1.WallTimeDate based_on_start_date = 6;
  int32 consolidation_days = 7;
  int32 deconsolidation_days = 8;
  int32 port_to_port_days = 9;
  int32 origin_days = 11;
  int32 destination_days = 12;
  // The IANA timezone identifier for the quoted destination location.
  string destination_timezone = 10;
}

// On time execution metrics for an air shipment. The numbers are in days.
message AirOteMilestones {
  float door_to_cfs_or_port = 1;
  float consolidation_wh_processing = 2;
  float terminal_processing = 3;
  float port_to_port = 4;
  float airport_recovery = 5;
  float deconsolidation_wh_processing = 6;
  float cfs_or_port_to_door = 7;
}

// Start event for transit time for an air shipment.
enum AirTransitTimeStart {
  AIR_TRANSIT_TIME_START_INVALID = 0;
  // For door-to-*.
  AIR_TRANSIT_TIME_START_DOOR_CARGO_READY = 1;
  // For cfs-to-*.
  AIR_TRANSIT_TIME_START_CFS_ARRIVAL = 2;
  // For airport-to-*.
  AIR_TRANSIT_TIME_START_AIRPORT_ARRIVAL = 3;
}

// End event for transit time for an air shipment.
enum AirTransitTimeEnd {
  AIR_TRANSIT_TIME_END_INVALID = 0;
  // For *-to-door.
  AIR_TRANSIT_TIME_END_DOOR_ARRIVAL = 1;
  // For *-to-cfs.
  AIR_TRANSIT_TIME_END_CFS_AVAILABLE_FOR_PICKUP = 2;
  // For *-to-airport.
  AIR_TRANSIT_TIME_END_AIRPORT_AVAILABLE_FOR_PICKUP = 3;
}

// This object represents the sell rate on the accepted quote.
message AirQuotedSellRate {
  string rate = 1;
  // ISO 4217 three letter currency code
  string currency_code = 2;
  // This field determines if the rate is per KG or per LB
  bool is_metric_units = 3;
}

// This object represents destination sorting center service
message DestinationSorting {
  DestinationSortingRole role = 1;
  // make this an object for extendability
}

enum DestinationSortingRole {
  DESTINATION_SORTING_ROLE_INVALID = 0;
  DESTINATION_SORTING_ROLE_FULL_SERVICE = 1;
  DESTINATION_SORTING_ROLE_NO_INVOLVEMENT = 2;
}
