// TEAM: customs_platform

syntax = "proto3";

package flexport.monolith.dataoutreachcampaigns.outreachscheduledtimereached.v1beta1;

import "google/protobuf/struct.proto";
import "google/protobuf/timestamp.proto";

option java_multiple_files = true;
option java_outer_classname = "OutreachScheduledTimeReachedProto";
option java_package = "com.flexport.monolith.dataoutreachcampaigns.outreachscheduledtimereached.v1beta1";
option ruby_package = "Flexport::Monolith::DataOutreachCampaigns::OutreachScheduledTimeReached::V1Beta1";

// Event published when a data request outreach's scheduled time has been reached.
message OutreachScheduledTimeReached {
  Campaign campaign = 1;
}

// Represents a campaign object which is a series of outreaches aimed at
// retrieving a specific type of data.
message Campaign {
  string fid = 1;
  CampaignType campaign_type = 2;
  string campaignable_fid = 3;
  Outreach outreach = 4;
}

// The type of campaign, typically associated with the type of data that the campaign
// aims to retrieve.
enum CampaignType {
  CAMPAIGN_TYPE_INVALID = 0;
  CAMPAIGN_TYPE_COMMERCIAL_INVOICE_CHASING = 1;
  CAMPAIGN_TYPE_ISF_CHASING = 2;
  CAMPAIGN_TYPE_CUSTOMS_ONBOARDING_OUTREACH = 3;
}

// Represents one specific outreach to request the data that the campaign is targeting.
message Outreach {
  OutreachState state = 1;
  google.protobuf.Timestamp scheduled_for_time = 2;
  google.protobuf.Struct metadata = 3;
  string fid = 4;
}

// Current state of the outreach's lifecycle.
enum OutreachState {
  OUTREACH_STATE_INVALID = 0;
  OUTREACH_STATE_CANCELLED = 1;
  OUTREACH_STATE_COMPLETED = 2;
  OUTREACH_STATE_IN_PROGRESS = 3;
}
