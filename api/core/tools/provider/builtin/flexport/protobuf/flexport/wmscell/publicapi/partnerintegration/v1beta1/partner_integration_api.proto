// TEAM: lumina

syntax = "proto3";

package flexport.wmscell.publicapi.partnerintegration.v1beta1;

import "flexport/wmscell/publicapi/partnerintegration/v1beta1/partner_integration_type.proto";
import "google/api/annotations.proto";

option java_multiple_files = true;
option java_outer_classname = "PartnerIntegrationApiProto";
option java_package = "com.flexport.wmscell.publicapi.partnerintegration.v1beta1";

service PartnerIntegrationAPI {
  rpc ShipmentArrival(ShipmentArrivalRequest) returns (ShipmentArrivalResponse) {
    option (google.api.http) = {
      post: "/warehouse/shipment/arrival"
      body: "*"
    };
  }
  rpc ShipmentDeparture(ShipmentDepartureRequest) returns (ShipmentDepartureResponse) {
    option (google.api.http) = {
      post: "/warehouse/shipment/departure"
      body: "*"
    };
  }
  rpc ShipmentPlanningStatus(ShipmentPlanningStatusRequest) returns (ShipmentPlanningStatusResponse) {
    option (google.api.http) = {
      post: "/warehouse/shipment/planning/status"
      body: "*"
    };
  }
  rpc GenerateShipmentCargoReceipt(GenerateShipmentCargoReceiptRequest) returns (GenerateShipmentCargoReceiptResponse) {
    option (google.api.http) = {
      post: "/warehouse/shipment/cargo_receipt"
      body: "*"
    };
  }

  rpc ShipmentArrivalExecute(ShipmentArrivalExecuteRequest) returns (ShipmentArrivalExecuteResponse);
  rpc ShipmentDepartureExecute(ShipmentDepartureExecuteRequest) returns (ShipmentDepartureExecuteResponse);
  rpc ShipmentPlanningStatusExecute(ShipmentPlanningStatusExecuteRequest) returns (ShipmentPlanningStatusExecuteResponse);
  rpc GenerateShipmentCargoReceiptExecute(GenerateShipmentCargoReceiptExecuteRequest) returns (GenerateShipmentCargoReceiptExecuteResponse);
}

message ShipmentArrivalRequest {
  string shipment_id = 1;
  string warehouse_name = 2;
  string actual_arrival_date = 3; // google.protobuf.Timestamp
}

message ShipmentDepartureRequest {
  string shipment_id = 1;
  string warehouse_name = 2;
  string actual_departure_date = 3; // google.protobuf.Timestamp
  OceanAdditionalData ocean_additional_data = 4;
}

message ShipmentPlanningStatusRequest {
  string shipment_id = 1;
  string warehouse_name = 2;
  string planning_status = 3; // enum: ready_for_planning
  repeated CargoItem cargo = 4;
}

message GenerateShipmentCargoReceiptRequest {
  string shipment_id = 1;
  string warehouse_name = 2;
  repeated CargoItem cargo = 3;
  repeated Damage damage = 4;
  repeated DangerousGood dangerous_goods = 5;
  DeliveryData delivery_data = 6;
  string remark = 7;
  string idempotent_key = 8;
}

message ShipmentArrivalResponse {
  string object = 1 [json_name = "_object"];
  string self = 2;
  string version = 3;
  ShipmentArrivalResponseData data = 4;
  Error error = 5;
}

message ShipmentDepartureResponse {
  string object = 1 [json_name = "_object"];
  string self = 2;
  string version = 3;
  ShipmentDepartureResponseData data = 4;
  Error error = 5;
}

message ShipmentPlanningStatusResponse {
  string object = 1 [json_name = "_object"];
  string self = 2;
  string version = 3;
  ShipmentPlanningStatusResponseData data = 4;
  Error error = 5;
}

message GenerateShipmentCargoReceiptResponse {
  string object = 1 [json_name = "_object"];
  string self = 2;
  string version = 3;
  GenerateShipmentCargoReceiptResponseData data = 4;
  Error error = 5;
}

message ShipmentArrivalExecuteRequest {
  ShipmentArrivalRequest execute_request = 1;
  string client = 2;
}

message ShipmentArrivalExecuteResponse {
  ShipmentArrivalResponse execute_response = 1;
}

message ShipmentDepartureExecuteRequest {
  ShipmentDepartureRequest execute_request = 1;
  string client = 2;
}

message ShipmentDepartureExecuteResponse {
  ShipmentDepartureResponse execute_response = 1;
}

message ShipmentPlanningStatusExecuteRequest {
  ShipmentPlanningStatusRequest execute_request = 1;
  string client = 2;
}

message ShipmentPlanningStatusExecuteResponse {
  ShipmentPlanningStatusResponse execute_response = 1;
}

message GenerateShipmentCargoReceiptExecuteRequest {
  GenerateShipmentCargoReceiptRequest execute_request = 1;
  string client = 2;
}

message GenerateShipmentCargoReceiptExecuteResponse {
  GenerateShipmentCargoReceiptResponse execute_response = 1;
}

message OceanAdditionalData {
  string container_number = 1;
  string seal_number = 2;
  string container_size = 3; // enum: ISO6346_CONTAINER_SIZE_TWENTY_FT, ISO6346_CONTAINER_SIZE_TWENTY_FT_HC, etc
  string container_type = 4; // enum: ISO6346_CONTAINER_TYPE_DRY, ISO6346_CONTAINER_TYPE_FLAT_RACK, etc
}

message ShipmentArrivalResponseData {}

message ShipmentDepartureResponseData {}

message ShipmentPlanningStatusResponseData {}

message GenerateShipmentCargoReceiptResponseData {}

message Error {
  string object = 1 [json_name = "_object"];
  int32 status = 2;
  string code = 3;
  string message = 4;
}
