// TEAM: customs_platform

syntax = "proto3";

package flexport.customs.escalationengine.v1;

import "flexport/customs/escalationengine/v1/escalation.proto";
import "google/protobuf/timestamp.proto";

option java_multiple_files = true;
option java_outer_classname = "EscalationEventProto";
option java_package = "com.flexport.customs.escalationengine.v1";
option ruby_package = "Flexport::Customs::EscalationEngine::V1";

// An event that occurred for an escalation together with the new escalation.
message EscalationEvent {
  // UUID
  string id = 1;
  // The new escalation entity
  Escalation escalation = 2;
  google.protobuf.Timestamp time = 3;
  // The type of change
  oneof event_type {
    EscalationCreatedEvent created = 11;
    EscalationDeliveredEvent delivered = 12;
    EscalationReopenedEvent reopened = 13;
    EscalationResolvedEvent resolved = 14;
  }
  // Escalation was created.
  message EscalationCreatedEvent {}

  // Escalation was delivered.
  message EscalationDeliveredEvent {
    // The target where the escalation was routed to.
    enum Target {
      TARGET_INVALID = 0;
      TARGET_TASK_MANAGER = 1;
      TARGET_CORE_EXCEPTION = 2;
    }
    Target target = 2;
  }
  // Escalation was reopened.
  message EscalationReopenedEvent {}

  // Escalation was resolved.
  message EscalationResolvedEvent {}
}
