// TEAM: unified_shipment_schedules

syntax = "proto3";

package flexport.schedulemanager.manageschedule.v1;

import "flexport/schedulemanager/datechanges/v1/leg_date_change.proto";
import "flexport/schedulemanager/datechanges/v1/schedule_dates_change.proto";
import "flexport/schedulemanager/types/enums/v1/manage_schedule_outcome_code.proto";
import "flexport/schedulemanager/types/enums/v1/schedule_manager_result_code.proto";

option java_multiple_files = true;
option java_outer_classname = "ManageScheduleAPIProto";
option java_package = "com.flexport.schedulemanager.manageschedule.v1";
option ruby_package = "Flexport::ScheduleManager::ManageSchedule::V1";

// APIs for proposing and/or requesting schedules changes and fetching outcomes/metadata from those processes.
service ManageScheduleAPI {
  // PRIMARY endpoints for persisting & evaluating dates:
  //   WRITE. Propose a set of date changes.
  rpc UpdateScheduleDates(UpdateScheduleDatesRequest) returns (UpdateScheduleDatesResponse);
  //   READ-ONLY. Evaluate the resulting schedule that would result from applying a proposed a set of date changes.
  rpc EvaluateScheduleDates(EvaluateScheduleDatesRequest) returns (EvaluateScheduleDatesResponse);
}

// PRIMARY endpoints:
message UpdateScheduleDatesRequest {
  option deprecated = true;
  flexport.schedulemanager.datechanges.v1.ScheduleDatesChange schedule_dates_change = 1;
}
message UpdateScheduleDatesResponse {
  option deprecated = true;
  flexport.schedulemanager.types.enums.v1.ManageScheduleOutcomeCode outcome_code = 3;
  flexport.schedulemanager.types.enums.v1.ScheduleManagerResultCode result_code = 1 [deprecated = true];
  repeated string failure_messages = 2;
}

message EvaluateScheduleDatesRequest {
  flexport.schedulemanager.datechanges.v1.ScheduleDatesChange schedule_dates_change = 1;
}
message EvaluateScheduleDatesResponse {
  flexport.schedulemanager.types.enums.v1.ManageScheduleOutcomeCode outcome_code = 4;
  flexport.schedulemanager.types.enums.v1.ScheduleManagerResultCode result_code = 1 [deprecated = true];
  repeated string failure_messages = 2;
  repeated flexport.schedulemanager.datechanges.v1.LegDateChange cascaded_leg_date_changes = 3;
}
