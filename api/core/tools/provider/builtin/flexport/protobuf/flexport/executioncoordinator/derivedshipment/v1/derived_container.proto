// TEAM: forwarding_platform

syntax = "proto3";

package flexport.executioncoordinator.derivedshipment.v1;

option java_multiple_files = true;
option java_outer_classname = "DerivedContainerProto";
option java_package = "com.flexport.executioncoordinator.derivedshipment.v1";
option ruby_package = "Flexport::ExecutionCoordinator::DerivedShipment::V1";

import "flexport/os/v1/types/cargo/v1/cargo.proto";
import "flexport/os/v1/types/walltimedate/v1/wall_time_date.proto";
import "flexport/executioncoordinator/types/enums/v1/drayage_warehouse_visit_type.proto";
import "google/protobuf/wrappers.proto";

// ContainerUse derived from state events.
message DerivedContainer {
  string container_fid = 1;
  flexport.os.v1.types.walltimedate.v1.WallTimeDate last_free_date = 2;
  flexport.os.v1.types.walltimedate.v1.WallTimeDate empty_returned_date = 3;
  string seal_number = 4;
  string reference_code = 5;
  string pickup_number = 6;
  DerivedContainerStatus container_status = 7;
  // Additional information specific to a node.
  repeated DerivedContainerNodeInfo node_info = 8;
  // Container info:
  flexport.os.v1.types.cargo.v1.Iso6346ContainerSize container_size = 9;
  flexport.os.v1.types.cargo.v1.Iso6346ContainerType container_type = 10;
  //
  flexport.os.v1.types.walltimedate.v1.WallTimeDate customs_release_date = 11 [deprecated = true];
  flexport.os.v1.types.walltimedate.v1.WallTimeDate gated_out_date = 12;
  bool has_customs_hold = 13;
  bool has_carrier_hold = 14;
  string yard_location = 15;
  google.protobuf.FloatValue demurrage_amount = 16;
  flexport.os.v1.types.walltimedate.v1.WallTimeDate empty_released_date = 17;
  flexport.os.v1.types.walltimedate.v1.WallTimeDate departure_from_origin_date = 18;
}

// Status of the derived container.
enum DerivedContainerStatus {
  DERIVED_CONTAINER_STATUS_INVALID = 0;
  DERIVED_CONTAINER_STATUS_ON_VESSEL = 1;
  DERIVED_CONTAINER_STATUS_NOT_AVAILABLE_FOR_PICKUP = 2;
  DERIVED_CONTAINER_STATUS_ON_HOLD = 3;
  DERIVED_CONTAINER_STATUS_AVAILABLE_FOR_PICKUP = 4;
  DERIVED_CONTAINER_STATUS_GATED_OUT = 5;
}

// Additional node-related info per derived container.
message DerivedContainerNodeInfo {
  string place_fid = 1;
  flexport.os.v1.types.walltimedate.v1.WallTimeDate available_date = 2;
  flexport.os.v1.types.walltimedate.v1.WallTimeDate discharge_date = 3;
  flexport.os.v1.types.walltimedate.v1.WallTimeDate customs_release_date = 4;
  // The date the container was released from the carrier
  flexport.os.v1.types.walltimedate.v1.WallTimeDate ocean_freight_release_date = 5;
  flexport.executioncoordinator.types.enums.v1.DrayageWarehouseVisitType warehouse_visit_type = 6;
  flexport.os.v1.types.walltimedate.v1.WallTimeDate last_free_date = 7;
}
