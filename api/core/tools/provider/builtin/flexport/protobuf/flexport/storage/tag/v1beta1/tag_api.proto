// TEAM: document_intelligence

syntax = "proto3";

package flexport.storage.tag.v1beta1;

option java_multiple_files = true;
option java_outer_classname = "TagApiProto";
option java_package = "com.flexport.storage.tag.v1beta1";
option ruby_package = "Flexport::Storage::Tag::V1Beta1";

import "flexport/storage/tag/v1beta1/tag.proto";

// API to interact with tags on File Objects.
service TagAPI {
  // Create a tag for a file object.
  rpc CreateTag(CreateTagRequest) returns (CreateTagResponse);
  // Get tags associated with a File Object.
  rpc GetTags(GetTagsRequest) returns (GetTagsResponse);
  // Updates or removes tag values. A `null` value represents a delete tag request.
  rpc UpsertTags(UpsertTagsRequest) returns (UpsertTagsResponse);
  // Upsert metadata for a file object.
  rpc UpsertMetadata(UpsertMetadataRequest) returns (UpsertMetadataResponse);
  // Get metadata associated with a File Object.
  rpc GetMetadata(GetMetadataRequest) returns (GetMetadataResponse);
}

message CreateTagRequest {
  flexport.storage.tag.v1beta1.Tag tag = 1;
}

message CreateTagResponse {
  bool successful = 1;
  string tag_fid = 2;
}

message GetTagsRequest {
  string file_object_fid = 1;
}

message GetTagsResponse {
  repeated flexport.storage.tag.v1beta1.Tag tags = 1;
}

message UpsertTagsRequest {
  string file_object_fid = 1;
  map<string, string> tags = 2;
}

message UpsertTagsResponse {
  bool successful = 1;
}

message UpsertMetadataRequest {
  string file_object_fid = 1;
  map<string, string> metadata = 2;
}

message UpsertMetadataResponse {
  bool successful = 1;
  string tag_fid = 2;
}

message GetMetadataRequest {
  string file_object_fid = 1;
}

message GetMetadataResponse {
  map<string, string> metadata = 1;
}
