// TEAM: billing

syntax = "proto3";

package flexport.documentprocessor.document.v1beta1;

import "flexport/document_processor/util/v1beta1/utils.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";

option java_multiple_files = true;
option java_outer_classname = "DocumentProto";
option java_package = "com.flexport.documentprocessor.document.v1beta1";
option ruby_package = "Flexport::DocumentProcessor::Document::V1Beta1";

// The Document object.
message Document {
  string fid = 1;
  string external_document_fid = 2;
  repeated Classification classifications = 3 [deprecated = true];
  string workflow_execution_fid = 4 [deprecated = true];
  SourceMeta source_meta = 5;
  int32 revision = 6 [deprecated = true];
  string duplicate_of = 7 [deprecated = true];
  string data_hash = 8;
  string document_name = 9;
  bool is_processed = 10;
  google.protobuf.Timestamp created_at_time = 11;
  google.protobuf.Timestamp updated_at_time = 12;
  string structured_data = 13 [deprecated = true];
  google.protobuf.StringValue vendor_fid = 14;
  DocumentType document_type = 15;
  string file_object_fid = 16;
  int64 revision_number = 17;
  google.protobuf.StringValue duplicate_of_fid = 18;
  DocumentData document_data = 19;
  google.protobuf.Timestamp received_at_time = 20;
  string duplication_group_fid = 21;
  google.protobuf.StringValue rendered_pdf_storage_fid = 22;
}

// Collection of Documents.
message Documents {
  repeated Document documents = 1;
}

// Classification of Document.
message Classification {
  oneof classification_type {
    VendorClassification vendor_classification = 1;
    DocumentTypeClassification document_type_classification = 2;
  }
}

// Classification based on vendor.
message VendorClassification {
  string vendor_id = 1;
}

// Classification based on Document type.
message DocumentTypeClassification {
  DocumentType document_type = 1;
}

// Types of document.
// Next ID: 22
enum DocumentType {
  DOCUMENT_TYPE_INVALID = 0;
  DOCUMENT_TYPE_INVOICE = 1;
  DOCUMENT_TYPE_ARRIVAL_NOTICE = 2;
  DOCUMENT_TYPE_CREDIT_NOTE = 3;
  DOCUMENT_TYPE_DEBIT_NOTE = 4;
  DOCUMENT_TYPE_FREE_TIME_NOTICE = 5;
  DOCUMENT_TYPE_BILL_OF_LADING = 6;
  DOCUMENT_TYPE_WAYBILL = 7;
  DOCUMENT_TYPE_PICK_UP_NOTICE = 8;
  DOCUMENT_TYPE_RELEASE_ORDER = 9;
  DOCUMENT_TYPE_UNKNOWN_NON_INVOICE = 10;
  DOCUMENT_TYPE_UNKNOWN = 11;
  DOCUMENT_TYPE_PREPAYMENT = 12;
  DOCUMENT_TYPE_STATEMENT_OF_ACCOUNTS = 13;
  DOCUMENT_TYPE_MASTER_BILL_OF_LADING = 14;
  DOCUMENT_TYPE_COMMERCIAL_INVOICE = 15;
  DOCUMENT_TYPE_ARRIVAL_NOTICE_INVOICE = 16;
  DOCUMENT_TYPE_CARGO_PICTURE = 17;
  DOCUMENT_TYPE_COMMERCIAL_INVOICE_PACKING_LIST = 18;
  DOCUMENT_TYPE_PACKING_LIST = 19;
  DOCUMENT_TYPE_DAMAGE_PHOTOS = 20;
  DOCUMENT_TYPE_WAREHOUSE_RECEIPT = 21;
}

// Source related meta data.
message SourceMeta {
  oneof source_type {
    EmailSourceMeta email_source_meta = 1;
    EdiSourceMeta edi_source_meta = 2;
    TransmissionSourceMeta transmission_source_meta = 3;
    PrepaymentSourceMeta prepayment_source_meta = 4;
    ManualUploadSourceMeta manual_upload_source_meta = 5;
    CoreDocumentSourceMeta core_document_source_meta = 6;
  }
}

// Meta data for EDI coming from Proserv.
message EdiSourceMeta {
  string document_type = 1;
  string issuing_entity_fid = 2;
  string receiving_entity_fid = 3;
  string representation_format = 4;
}

// Meta data for email.
message EmailSourceMeta {
  string sender_address = 1;
  repeated string receipient_addresses = 2 [deprecated = true];
  string message_subject = 3;
  repeated AttachmentMeta attachment_meta = 4 [deprecated = true];
  string email_id = 5 [deprecated = true];
  repeated string to_addresses = 6;
  repeated string cc_addresses = 7;
  google.protobuf.StringValue reply_to_address = 8;
  string body = 9;
  AttachmentMeta source_attachment = 10;
  repeated AttachmentMeta other_attachments = 11;
}

// Meta data for transmission.
message TransmissionSourceMeta {
  string issuing_entity_fid = 1;
  string receiving_entity_fid = 2;
  string delivery_order_fid = 3;
  string transmission_invoice_fid = 4;
}

// Meta data for prepayments.
message PrepaymentSourceMeta {
  string file_content_type = 1;
  string issuing_entity_fid = 2;
  string receiving_entity_fid = 3;
}

// Meta data for manual upload.
message ManualUploadSourceMeta {
  string user_fid = 1;
}

// Meta data for documents synchronized from legacy core documents.
message CoreDocumentSourceMeta {
  string core_document_fid = 1;
}

// Meta data of attachment.
message AttachmentMeta {
  string id = 1;
  string name = 2;
  string file_extention = 3 [deprecated = true];
  string file_extension = 4;
}

// Structured document data message.
message DocumentData {
  google.protobuf.StringValue document_number = 1;
  google.protobuf.StringValue issuing_entity_fid = 2;
}

// Filter for document.
message DocumentFilters {
  repeated string fids = 1;
  repeated string vendor_fids = 2;
  google.protobuf.StringValue document_name = 3;
  repeated string document_types = 4;
  repeated string sources = 5;
  repeated string sender_addresses = 6;
  flexport.documentprocessor.util.v1beta1.DateRange created_at_range = 7;
  flexport.documentprocessor.util.v1beta1.DateRange updated_at_range = 8;
  google.protobuf.StringValue search_text = 9;
  repeated string workflow_statuses = 10;
  repeated string data_hashes = 11;
  google.protobuf.BoolValue exclude_duplicates = 12;
}
